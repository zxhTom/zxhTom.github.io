!function(){var e,t,n,i=document.getElementById("search-key"),s=(document.getElementById("search-local"),document.getElementById("search-form"),document.getElementById("result-mask")),o=document.getElementById("result-wrap"),r=document.getElementById("search-result"),c=document.getElementById("search-tpl").innerHTML;function a(e,t){return t.lastIndex=0,t.test(e)}function u(e){var t="";t=e.length?e.map(function(e){return t=c,n={title:e.title,path:e.path,content:function(e){var t=i.value,n=e.indexOf(t),s=e.replace(t,"<b>"+t+"</b>");if(n>0)return s.substr(n-15,45)}(e.text)},t.replace(/\{\w+\}/g,function(e){var t=e.replace(/\{|\}/g,"");return n[t]||""});var t,n}).join(""):'<div class="tips"><p>没有找到相关结果!</p></div>',r.innerHTML=t}function d(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function l(e,t){d(e,t)||(e.className+=" "+t)}function h(e,t){if(d(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}}function f(e){var t=this.value.trim();if(t){var r=new RegExp(t.replace(/[ ]/g,"|"),"gmi");!function(e){if(n)e(n);else{var t=new XMLHttpRequest;t.open("GET","/content.json",!0),t.onload=function(){if(this.status>=200&&this.status<300){var t=JSON.parse(this.response||this.responseText);n=t instanceof Array?t:t.posts,e(n)}else console.error(this.statusText)},t.onerror=function(){console.error(this.statusText)},t.send()}}(function(e){u(e.filter(function(e){return n=r,a((t=e).title,n)||a(t.text,n);var t,n}))}),e.preventDefault(),h(o,"hide"),h(s,"hide"),i.onfocus=function(){h(o,"hide"),h(s,"hide")}}else u("")}window.innerWidth?e=parseInt(window.innerWidth):document.body&&document.body.clientWidth&&(e=parseInt(document.body.clientWidth)),window.innerHeight?t=parseInt(window.innerHeight):document.body&&document.body.clientHeight&&(t=parseInt(document.body.clientHeight)),s.style.width=e+"px",s.style.height=t+"px",i.onfocus=function(){i.addEventListener("input",f)},s.onclick=function(){l(o,"hide"),l(s,"hide")}}();
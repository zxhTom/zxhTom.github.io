<!DOCTYPE HTML><html><head><script>
	if('' == 'true'){
		if (prompt('请输入管理员密码') !== '025025'){
            alert('密码错误！');
            location.href='https://zxhtom.oschina.io';
    	}
	}
</script><meta charset=UTF-8><meta name=viewport content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"><meta http-equiv=X-UA-Compatible content="IE=Edge,chrome=1"><meta http-equiv=Cache-Control content=no-siteapp><meta name=renderer content=webkit|ie-comp|ie-stand><meta name=apple-mobile-web-app-capable content=yes><meta name=apple-mobile-web-app-status-bar-style content=black><meta name=format-detection content="telephone=no,email=no,adress=no"><meta name=browsermode content=application><meta name=screen-orientation content=portrait><link rel=dns-prefetch href=https://zxhtom.oschina.io><meta name=description content=张新华的个人网站><meta name=robots content=all><meta name=google content=all><meta name=googlebot content=all><meta name=verify content=all><title>Spring项目集成ShiroFilter简单实现权限管理 | 烟花散尽13141</title><link rel=alternate href=/atom.xml title=烟花散尽13141 type=application/atom+xml><link rel=icon href=/favicon.ico><link rel=stylesheet href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css?rev=9.12.0"><link rel=stylesheet href="//cdn.bootcss.com/bootstrap/3.3.4/css/bootstrap.min.css?rev=3.3.4"><link rel=stylesheet href=//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css><link rel=stylesheet href="/css/style.css?rev=@@hash"><link rel=stylesheet href="/css/mycss.css?rev=@@hash"><div class=hide><script src="https://s4.cnzz.com/z_stat.php?id=1263868967&web_id=1263868967" language=JavaScript></script></div><script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?709c2dde1f61f5e589ff3ed31ba52411";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script></head><body><header class=main-header style=background-image:url(http://7xpw2b.com1.z0.glb.clouddn.com/hexo-sinppet/img/banner2.jpg)><div class=main-header-box><a class=header-avatar href="/"><img src=/img/avatar.jpg alt=logo头像></a><div class=branding><h2>学如逆水行舟，不进则退！！！</h2></div></div></header><nav class=main-navigation><div class=container><div class=row><div class=col-sm-12><div class=navbar-header><span class="nav-toggle-button collapsed" data-toggle=collapse data-target=#main-menu id=mnav><span class=sr-only>Toggle navigation</span> <i class="fa fa-bars"></i></span></div><div class="collapse navbar-collapse" id=main-menu><ul class=menu><li role=presentation><a href="/"><i class="fa fa-fw"></i>首页</a></li><li role=presentation><a href="/about/"><i class="fa fa-fw"></i>关于我</a></li><li role=presentation><a href="/tags/"><i class="fa fa-fw"></i>标签</a></li><li role=presentation><a href="/categories/"><i class="fa fa-fw"></i>分类</a></li><li role=presentation><a href="/archives/"><i class="fa fa-fw"></i>归档</a></li><li role=presentation><a href="/schedule/"><i class="fa fa-fw"></i>日程表</a></li><li role=presentation><a href=/sitemap.xml><i class="fa fa-fw"></i>地图导航</a></li><li role=presentation><a href="/404/"><i class="fa fa-fw"></i>公益活动</a></li></ul></div></div></div></div></nav><section class=content-wrap><div class=container><div class=row><main class="col-md-8 main-content m-post"><div id=toc class=toc-article><div class=hamburger><div class=line></div><div class=line></div><div class=line></div></div><strong class=toc-title>文章目录</strong><div class=menu-inner><ol class=toc><li class="toc-item toc-level-2"><a class=toc-link href=#web-xml配置><span class=toc-number>1.</span> <span class=toc-text>web.xml配置</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#spring-shiro-xml><span class=toc-number>2.</span> <span class=toc-text>spring-shiro.xml</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#spring-shiro-xml源码><span class=toc-number>3.</span> <span class=toc-text>spring-shiro.xml源码</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#Shiro的其他权限过滤器及其用法><span class=toc-number>4.</span> <span class=toc-text>Shiro的其他权限过滤器及其用法</span></a></li></ol></div><svg version=1.1 id=blob xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><path id=blob-path d=M60,500H0V0h60c0,0,20,172,20,250S60,900,60,500z></path></svg></div><p id=process></p><article class=post><div class=post-head><h1 id=Spring项目集成ShiroFilter简单实现权限管理>Spring项目集成ShiroFilter简单实现权限管理</h1><div class=post-meta><span class="categories-meta fa-wrap"><i class="fa fa-folder-open-o"></i> <span>编程</span></span> <span class=fa-wrap><i class="fa fa-tags"></i> <span class=tags-meta>java</span></span> <span class=fa-wrap><i class="fa fa-clock-o"></i> <span class=date-meta>2017/02/13</span></span> <a href=/zxh/20170213.html#comments class=comment-count><i id=changyan_count_unit data-xid=zxh/20170213.html></i>留言, <i id=changyan_parti_unit data-xid=zxh/20170213.html></i>参与</a> <span id=busuanzi_container_page_pv>view : <span id=busuanzi_value_page_pv></span>次</span></div><p class="fa fa-exclamation-triangle warning">本文于<strong>340</strong>天之前发表，文中内容可能已经过时。</p></div><div class="post-body post-content"><p>Shiros是我们开发中常用的用来实现权限控制的一种工具包<br><a id=more></a></p><p>Shiros是我们开发中常用的用来实现权限控制的一种工具包，它主要有认证、授权、加密、会话管理、与Web集成、缓存等功能。我是从事javaweb工作的，我就经常遇到需要实现权限控制的项目，之前我们都是靠查询数据获取列表拼接展示的，还有的是及时的判断权限的问题的，现在有了Shiros了，我们就可以统一的进行设置权限问题，Shrios的实现也是很简单的，下面让我们来看看具体实现步骤</p><h2 id=web-xml配置><a href=#web-xml配置 class=headerlink title=web.xml配置></a>web.xml配置</h2><ul><li>因为我们是与spring进行集成的，而spring的基本就是web项目的xml文件。所以我们在web.xml中配置shiros的过滤拦截。正常情况下，我们需要将shiro的filter配置在所有的filter前面，当然和encodingFilter这个filter是不区分前后的。因为两者互相不影响的。</li></ul><pre><code>&lt;filter&gt;
        &lt;filter-name&gt;shiroFilter&lt;/filter-name&gt;
        &lt;filter-class&gt;org.springframework.web.filter.DelegatingFilterProxy&lt;/filter-class&gt;
        &lt;init-param&gt;
            &lt;!-- 该值缺省为false,表示生命周期由SpringApplicationContext管理,设置为true则表示由servlet container管理 --&gt;
            &lt;param-name&gt;targetFilterLifecycle&lt;/param-name&gt;
            &lt;param-value&gt;true&lt;/param-value&gt;
        &lt;/init-param&gt;
    &lt;/filter&gt;

    &lt;filter-mapping&gt;
        &lt;filter-name&gt;shiroFilter&lt;/filter-name&gt;
        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
    &lt;/filter-mapping&gt;
</code></pre><ul><li>好了，到这里shiro就集成到spring项目里面去了。What?对的，你妹看错，就这么简单，shiro就这一步就集成到项目里了。集成式集成了，但是想要完整的实现效果当然我们还是需要继续的往下配置的。在这里请记住我这里的shiroq过滤器的名字叫shiroFilter(后面有用的)。下面我们的shiro需要到spring的配置文件application.xml文件里去配置，在我的项目的我的spring配置文件是spring-service.xml。而在spring-service.xml中又引入了spring-shiro.xml，也就是说最后shiro的配置是配置在spring-shiro.xml文件中。<font face=楷体 size=5 color=red>最终源码在最后下载</font></li></ul><h2 id=spring-shiro-xml><a href=#spring-shiro-xml class=headerlink title=spring-shiro.xml></a>spring-shiro.xml</h2><ul><li>这里我们将来看看spring-shiro.xml的配置，这里我采取倒叙的方式讲解，我觉的倒叙更加的有助于我们理解代码。首先我们还记得在web.xml中配置的那个filter吧，名字shiroFilter,对spring-shiro.xml配置文件就是通过这个filter展开的。首先我们在web.xml配置的过滤器实际上是配置ShiroFilterFactoryBean，所以在这里需要将ShiroFilterFactoryBean定义为shiroFilter</li></ul><pre><code>&lt;bean id=&quot;shiroFilter&quot; class=&quot;org.apache.shiro.spring.web.ShiroFilterFactoryBean&quot;&gt;  
        &lt;!-- Shiro的核心安全接口,这个属性是必须的 --&gt;  
        &lt;property name=&quot;securityManager&quot; ref=&quot;securityManager&quot;/&gt;  
        &lt;!-- 要求登录时的链接(可根据项目的URL进行替换),非必须的属性,默认会自动寻找Web工程根目录下的&quot;/login.html&quot;页面 --&gt;  
        &lt;property name=&quot;loginUrl&quot; value=&quot;/login.html&quot;/&gt;  
        &lt;!-- 登录成功后要跳转的连接 --&gt;  
        &lt;property name=&quot;successUrl&quot; value=&quot;/index.html&quot;/&gt;
        &lt;!-- 用户访问未对其授权的资源时,所显示的连接 --&gt;  
        &lt;!-- 若想更明显的测试此属性可以修改它的值,如unauthor.jsp,然后用[玄玉]登录后访问/admin/listUser.jsp就看见浏览器会显示unauthor.jsp --&gt;  
        &lt;property name=&quot;unauthorizedUrl&quot; value=&quot;/login.html&quot;
        /&gt;  
        &lt;!-- Shiro连接约束配置,即过滤链的定义 --&gt;  
        &lt;!-- 此处可配合我的这篇文章来理解各个过滤连的作用http://blog.csdn.net/jadyer/article/details/12172839 --&gt;  
        &lt;!-- 下面value值的第一个&#39;/&#39;代表的路径是相对于HttpServletRequest.getContextPath()的值来的 --&gt;  
        &lt;!-- anon：它对应的过滤器里面是空的,什么都没做,这里.do和.jsp后面的*表示参数,比方说login.jsp?main这种 --&gt;  
        &lt;!-- authc：该过滤器下的页面必须验证后才能访问,它是Shiro内置的一个拦截器org.apache.shiro.web.filter.authc.FormAuthenticationFilter --&gt;  
        &lt;property name=&quot;filterChainDefinitions&quot;&gt;  
            &lt;value&gt;
                /statics/**=anon
                /login.html=anon
                /sys/schedule.html=perms[sys:schedule:save]
                /sys/login=anon
                /captcha.jpg=anon
                /**=authc
            &lt;/value&gt;
        &lt;/property&gt;
    &lt;/bean&gt;
</code></pre><ul><li>具体的上面的代码注释已经解释的很清楚了，在这里主要讲解下filterChainDefinitions里面的设置属性。里面的value就是我们控制的页面权限设置。filterChainDefinitions的原则是按顺序查找一旦查找到符合的页面要求就不在继续查找了。所以我们需要将有通配符的页面设置在最后。上面配置中有<code>/sys/schedule.html=perms[sys:schedule:save]</code><br>意思就是说访问schedule.html这个页面前提是你得有<code>sys:schedule:save</code>这个权限。至于这个权限在哪里配置。在这里先透露一下。在Realm中获取</li></ul><p><img src="http://img.blog.csdn.net/20170210133235456?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMzEzMjA1MQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=这里写图片描述></p><ul><li>在上面的配置我们securityManager属性是shiro 安全核心配置接口，这里需要我们自己填写，这里的配置就是需要我们实现我们的认证，因为不同的项目我们认证权限肯定是不一样的。所以这也是shiro给我们唯一为数不多的代码编写的接口，我们只需要在这接口提供我们自己的认证和角色权限分配就行了。</li></ul><pre><code>&lt;!-- Shiro默认会使用Servlet容器的Session,可通过sessionMode属性来指定使用Shiro原生Session --&gt;  
    &lt;!-- 即&lt;property name=&quot;sessionMode&quot; value=&quot;native&quot;/&gt;,详细说明见官方文档 --&gt;  
    &lt;!-- 这里主要是设置自定义的单Realm应用,若有多个Realm,可使用&#39;realms&#39;属性代替 --&gt;  
    &lt;bean id=&quot;securityManager&quot; class=&quot;org.apache.shiro.web.mgt.DefaultWebSecurityManager&quot;&gt;  
        &lt;property name=&quot;realm&quot; ref=&quot;userRealm&quot;/&gt;
    &lt;/bean&gt;
</code></pre><ul><li>那么这里有出现了一个realm，这个realm就是我们实现权限和认证的地方。我们只需要通过spring将我们的实现类指定为realm即可</li></ul><pre><code>&lt;bean id=&quot;userRealm&quot; class=&quot;io.renren.shiro.UserRealm&quot;/&gt;
</code></pre><ul><li>在讲UserRealm之前我们先来看看shir默认的realm逻辑是咋样的</li></ul><p><img src="http://img.blog.csdn.net/20170213133503987?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMzEzMjA1MQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=这里写图片描述></p><ul><li>通常我们只需要继承AuthorizingRealm(授权)，因为AuthorizingRealm里面继承了AuthenticatingRealm（认证），所以我们只需要继承AuthorizingRealm（授权），我们就可以重写授权和认证两个方法了，这两个方法里面就实现权限管理操作。</li></ul><p><img src="http://img.blog.csdn.net/20170213134827008?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMzEzMjA1MQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=这里写图片描述></p><ul><li><p>首先来看看在认证登录中我们有哪些值得注意的地方</p></li><li><p>doGetAuthenticationInfo中实现登录认证出现的几种异常</p><ul><li>UnknownAccountException：获取的user为空</li><li>LockedAccountException ：此用户被锁住了</li><li>IncorrectCredentialsException ： 密码不正确(建议提示为 用户名或密码错误。安全考虑)</li><li>ExcessiveAttemptsException ： 密码错误次数太多(现在很多网站上都有相关的操作)</li><li>最后通过用户名+明文密码+Reaml中的getName进行用户信息组装</li></ul></li><li><p>登录认证就这几点注意，其次就是权限分配了，doGetAuthorizationInfo(授权)，在doGetAuthorizationInfo里我们通过PrincipalCollection这个身份集合，当我们只配置了一个Reaml的时候我们可以通过PrincipalCollection中的getPrimaryPrincipal方法获得刚刚传入的Reaml(用户名)就行了，但是当我们配置了多个Reaml的时候可以通过PrincipalCollection中的getRealmNames获取所有的Reaml的用户名就行了。</p></li><li><p>然后通过用户名去数据库获取权限菜单。最后返回一个带有角色和权限的 SimpleAuthorization的信息，意思就是一下角色具有哪些权限。如果就一个角色的时候也可以不指定角色，分别通过setStringPermissions(指定权限)+setRoles(指定角色)</p></li><li><p>到这里shiro的配置就完成了。</p></li><li><p>另外还有一点shiro的配置是处理shiro的生命周期和shiro的注解的启用的，这里就不解释了，直接上代码</p></li></ul><pre><code>&lt;!-- Shiro生命周期处理器 --&gt;
    &lt;bean id=&quot;lifecycleBeanPostProcessor&quot; class=&quot;org.apache.shiro.spring.LifecycleBeanPostProcessor&quot;/&gt;

    &lt;!-- AOP式方法级权限检查  --&gt;
    &lt;bean class=&quot;org.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator&quot; depends-on=&quot;lifecycleBeanPostProcessor&quot;&gt;
        &lt;property name=&quot;proxyTargetClass&quot; value=&quot;true&quot; /&gt;
    &lt;/bean&gt;
    &lt;!-- 开启shiro注解 --&gt;
    &lt;bean class=&quot;org.apache.shiro.spring.security.interceptor.AuthorizationAttributeSourceAdvisor&quot;&gt;
        &lt;property name=&quot;securityManager&quot; ref=&quot;securityManager&quot;/&gt;
    &lt;/bean&gt;
</code></pre><h2 id=spring-shiro-xml源码><a href=#spring-shiro-xml源码 class=headerlink title=spring-shiro.xml源码></a>spring-shiro.xml源码</h2><pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
    xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;
    xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;
    xsi:schemaLocation=&quot;
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-4.2.xsd        
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-4.2.xsd
        http://www.springframework.org/schema/tx 
         http://www.springframework.org/schema/tx/spring-tx-4.2.xsd
         http://www.springframework.org/schema/aop 
         http://www.springframework.org/schema/aop/spring-aop-4.2.xsd
        http://www.springframework.org/schema/mvc 
         http://www.springframework.org/schema/mvc/spring-mvc-4.2.xsd&quot;&gt;

    &lt;!-- 继承自AuthorizingRealm的自定义Realm,即指定Shiro验证用户登录的类为自定义的UserRealm.java --&gt;  
    &lt;bean id=&quot;userRealm&quot; class=&quot;io.renren.shiro.UserRealm&quot;/&gt;

    &lt;!-- Shiro默认会使用Servlet容器的Session,可通过sessionMode属性来指定使用Shiro原生Session --&gt;  
    &lt;!-- 即&lt;property name=&quot;sessionMode&quot; value=&quot;native&quot;/&gt;,详细说明见官方文档 --&gt;  
    &lt;!-- 这里主要是设置自定义的单Realm应用,若有多个Realm,可使用&#39;realms&#39;属性代替 --&gt;  
    &lt;bean id=&quot;securityManager&quot; class=&quot;org.apache.shiro.web.mgt.DefaultWebSecurityManager&quot;&gt;  
        &lt;property name=&quot;realm&quot; ref=&quot;userRealm&quot;/&gt;
    &lt;/bean&gt;

    &lt;!-- Shiro主过滤器本身功能十分强大,其强大之处就在于它支持任何基于URL路径表达式的、自定义的过滤器的执行 --&gt;  
    &lt;!-- Web应用中,Shiro可控制的Web请求必须经过Shiro主过滤器的拦截,Shiro对基于Spring的Web应用提供了完美的支持 --&gt;  
    &lt;bean id=&quot;shiroFilter&quot; class=&quot;org.apache.shiro.spring.web.ShiroFilterFactoryBean&quot;&gt;  
        &lt;!-- Shiro的核心安全接口,这个属性是必须的 --&gt;  
        &lt;property name=&quot;securityManager&quot; ref=&quot;securityManager&quot;/&gt;  
        &lt;!-- 要求登录时的链接(可根据项目的URL进行替换),非必须的属性,默认会自动寻找Web工程根目录下的&quot;/login.html&quot;页面 --&gt;  
        &lt;property name=&quot;loginUrl&quot; value=&quot;/login.html&quot;/&gt;  
        &lt;!-- 登录成功后要跳转的连接 --&gt;  
        &lt;property name=&quot;successUrl&quot; value=&quot;/index.html&quot;/&gt;
        &lt;!-- 用户访问未对其授权的资源时,所显示的连接 --&gt;  
        &lt;!-- 若想更明显的测试此属性可以修改它的值,如unauthor.jsp,然后用[玄玉]登录后访问/admin/listUser.jsp就看见浏览器会显示unauthor.jsp --&gt;  
        &lt;property name=&quot;unauthorizedUrl&quot; value=&quot;/login.html&quot;
        /&gt;  
        &lt;!-- Shiro连接约束配置,即过滤链的定义 --&gt;  
        &lt;!-- 此处可配合我的这篇文章来理解各个过滤连的作用http://blog.csdn.net/jadyer/article/details/12172839 --&gt;  
        &lt;!-- 下面value值的第一个&#39;/&#39;代表的路径是相对于HttpServletRequest.getContextPath()的值来的 --&gt;  
        &lt;!-- anon：它对应的过滤器里面是空的,什么都没做,这里.do和.jsp后面的*表示参数,比方说login.jsp?main这种 --&gt;  
        &lt;!-- authc：该过滤器下的页面必须验证后才能访问,它是Shiro内置的一个拦截器org.apache.shiro.web.filter.authc.FormAuthenticationFilter --&gt;  
        &lt;property name=&quot;filterChainDefinitions&quot;&gt;  
            &lt;value&gt;
                /statics/**=anon
                /login.html=anon
                /sys/schedule.html=perms[sys:schedule:save]
                /sys/login=anon
                /captcha.jpg=anon
                /**=authc
            &lt;/value&gt;
        &lt;/property&gt;
    &lt;/bean&gt;
    &lt;!-- Shiro生命周期处理器 --&gt;
    &lt;bean id=&quot;lifecycleBeanPostProcessor&quot; class=&quot;org.apache.shiro.spring.LifecycleBeanPostProcessor&quot;/&gt;

    &lt;!-- AOP式方法级权限检查  --&gt;
    &lt;bean class=&quot;org.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator&quot; depends-on=&quot;lifecycleBeanPostProcessor&quot;&gt;
        &lt;property name=&quot;proxyTargetClass&quot; value=&quot;true&quot; /&gt;
    &lt;/bean&gt;
    &lt;!-- 开启shiro注解 --&gt;
    &lt;bean class=&quot;org.apache.shiro.spring.security.interceptor.AuthorizationAttributeSourceAdvisor&quot;&gt;
        &lt;property name=&quot;securityManager&quot; ref=&quot;securityManager&quot;/&gt;
    &lt;/bean&gt;
&lt;/beans&gt;
</code></pre><h2 id=Shiro的其他权限过滤器及其用法><a href=#Shiro的其他权限过滤器及其用法 class=headerlink title=Shiro的其他权限过滤器及其用法></a>Shiro的其他权限过滤器及其用法</h2><ul><li>anon ：org.apache.shiro.web.filter.authc.AnonymousFilter</li></ul><blockquote><p>/statics/**=anon ：以statics开头的请求可以随便访问，没有权限</p></blockquote><ul><li>authc：org.apache.shiro.web.filter.authc.FormAuthenticationFilter</li></ul><blockquote><p>/**=authc ：表示所有的请求都需要进行验证权限且权限通过才能放行</p></blockquote><ul><li>authcBasic：org.apache.shiro.web.filter.authc.BasicHttpAuthenticationFilter</li></ul><blockquote><p>/admins/user/**=authcBasic ：表示没有通过httpbasic认证的</p></blockquote><ul><li>perms：org.apache.shiro.web.filter.authz.PermissionsAuthorizationFilter</li></ul><blockquote><p>/admins/user/<em>*=perms[user:add:</em>] ：上面已经解释过了，表示访问./admins/user/..<br>的请求必须是由use:add:*权限的才可以访问，否则重定向登录页面(这里的登录页面默认是web下的login.html，正常我们通过设置shiro中的filterChainDefinitions属性设置页面)。</p></blockquote><ul><li>port : org.apache.shiro.web.filter.authz.PortFilter</li></ul><blockquote><p>/admins/user/**=port[8081] :<br>当访问的请求端口不是8001时，则shiro会重定向到schemal://serverName:8081?queryString请求。这个请求中schemal是http或者https,serverName是我们原请求中的域名，8081就是我们port里设置端口号，queryString是我们原请求中携带的参数。</p></blockquote><ul><li>rest :org.apache.shiro.web.filter.authz.HttpMethodPermissionFilter</li></ul><blockquote><p>/admins/user/**=rest[user] :<br>rest表示请求方法。相当于perms[user:method],这里method值得是post，get , delete.</p></blockquote><ul><li>roles :org.apache.shiro.web.filter.authz.RolesAuthorizationFilter</li></ul><blockquote><p>/admins/user/**=roles[admin] :<br>这个和perms使用时一样的，只不过在后台我们是通过<code>setRoles</code>方法给用户设置角色的。</p></blockquote><ul><li>ssl : org.apache.shiro.web.filter.authz.SslFilter</li></ul><blockquote><p>/admins/user/**=ssl : 表示该请求是安全请求，协议是https</p></blockquote><ul><li>user ： org.apache.shiro.web.filter.authc.UserFilter</li></ul><blockquote><p>/admins/user/**=user 表示必须存在用户，在登录操作是不进行检查的，因为登录的时候根本就不存在用户。</p></blockquote><ul><li>logout : org.apache.shiro.web.filter.authc.LogoutFilter</li></ul><blockquote><p>/admins/user/**=logout ： 表示该请求是退出操作</p></blockquote><font fac=楷体 size=5 color=red><br>注意！上面中roles，perms，rest这三个里面是可以带参数的，如果有多个参数参数之间必须用英文装填下的逗号分隔。在页面中判断是所有参数都满足才算是满足的。<br></font><font face=楷体 size=4>以上是自己根据别的文章加上自己认识总结，参考一下文章</font><p><a href=http://jinnianshilongnian.iteye.com/blog/2018398 target=_blank rel=noopener>http://jinnianshilongnian.iteye.com/blog/2018398</a></p></div><div class=post-footer><div>转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © <a target=_blank>烟花散尽13141</a></div><div></div></div></article><div class="article-nav prev-next-wrap clearfix"><a href=/zxh/20170213.html class="pre-post btn btn-default"><i class="fa fa-angle-left fa-fw"></i>上一篇</a> <a href=/zxh/20170119.html class="next-post btn btn-default">下一篇<i class="fa fa-angle-right fa-fw"></i></a></div><div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;"><div>坚持原创技术分享，您的支持将鼓励我继续创作！</div><button id=rewardButton disable=enable onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}"><span>赏</span></button><div id=QR style="display: none;"><div id=wechat style="display: inline-block"><a href=/img/wechatpay.jpg class="fancybox fancybox.image" rel=group><img id=wechat_qr src=/img/wechatpay.jpg alt="颜敏 WeChat Pay"></a><p>微信打赏</p></div><div id=alipay style="display: inline-block"><a href=/img/alipay.jpg class="fancybox fancybox.image" rel=group><img id=alipay_qr src=/img/alipay.jpg alt="颜敏 Alipay"></a><p>支付宝打赏</p></div></div></div><div id=comments><div id=SOHUCS sid=/zxh/20170213.html></div><script type=text/javascript> 
    (function(){ 
    var appid = 'cyti5JvoU'; 
    var conf = 'prod_a32310aad07e12c7706c8da1901ed57b'; 
    var width = window.innerWidth || document.documentElement.clientWidth; 
    if (width < 960) { 
    window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>'); } else { var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("https://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); } })(); </script></div></main><aside class="col-md-4 sidebar"><div class=widget><h3 class=title>Search</h3><div id=search-form><div id=result-mask class=hide></div><div class=search-area><input id=search-key type=search autocomplete=off placeholder=搜点什么呢?> <button type=button class=search-form-submit id=search-local>站内搜索</button></div><div id=result-wrap class=hide><div id=search-result></div></div><div class=hide><template id=search-tpl><div class=item><a href=/{path} title={title}><div class=title>{title}</div><div class=content>{content}</div></a></div></template></div></div></div><div class="widget notification"><h3 class=title>网站公告</h3><div><p><font color=red>pc、移动端目录区分设计</font></p></div></div><div class=widget><h3 class=title>Social</h3><div class="content social"><a href=//gitee.com/zxhtom rel="external nofollow" title=oschina target=_blank><i class="git fa fa-git"></i></a> <a href=mailto:870775401@qq.com rel="external nofollow" title=邮箱 target=_blank><i class="envelope-o fa fa-envelope-o"></i></a> <a href=870775401 rel="external nofollow" title=联系QQ target=_blank><i class="qq fa fa-qq"></i></a> <a href="/" rel="external nofollow" title=微博 target=_blank><i class="weibo fa fa-weibo"></i></a> <a href=376091466 rel="external nofollow" title=QQ群1 target=_blank><i class="users fa fa-users"></i></a> <a href=/atom.xml rel="external nofollow" title=RSS target=_blank><i class="feed fa fa-feed"></i></a></div></div><div class=widget><h3 class=title>Categories</h3><ul class=category-list><li class=category-list-item><a class=category-list-link href="/categories/开发工具/"><i class=fa aria-hidden=true>开发工具</i></a><span class=category-list-count>3</span></li><li class=category-list-item><a class=category-list-link href="/categories/案例/"><i class=fa aria-hidden=true>案例</i></a><span class=category-list-count>2</span></li><li class=category-list-item><a class=category-list-link href="/categories/程序人生/"><i class=fa aria-hidden=true>程序人生</i></a><span class=category-list-count>3</span></li><li class=category-list-item><a class=category-list-link href="/categories/编程/"><i class=fa aria-hidden=true>编程</i></a><span class=category-list-count>88</span></li></ul></div><div class=widget><h3 class=title>Archives</h3><ul class=archive-list><li class=archive-list-item><a class=archive-list-link href="/archives/2018/01/"><i class=fa aria-hidden=true>2018年01月</i></a><span class=archive-list-count>2</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2017/12/"><i class=fa aria-hidden=true>2017年12月</i></a><span class=archive-list-count>1</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2017/11/"><i class=fa aria-hidden=true>2017年11月</i></a><span class=archive-list-count>2</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2017/10/"><i class=fa aria-hidden=true>2017年10月</i></a><span class=archive-list-count>3</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2017/06/"><i class=fa aria-hidden=true>2017年06月</i></a><span class=archive-list-count>1</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2017/04/"><i class=fa aria-hidden=true>2017年04月</i></a><span class=archive-list-count>5</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2017/03/"><i class=fa aria-hidden=true>2017年03月</i></a><span class=archive-list-count>4</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2017/02/"><i class=fa aria-hidden=true>2017年02月</i></a><span class=archive-list-count>4</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2017/01/"><i class=fa aria-hidden=true>2017年01月</i></a><span class=archive-list-count>9</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2016/12/"><i class=fa aria-hidden=true>2016年12月</i></a><span class=archive-list-count>7</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2016/11/"><i class=fa aria-hidden=true>2016年11月</i></a><span class=archive-list-count>3</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2016/10/"><i class=fa aria-hidden=true>2016年10月</i></a><span class=archive-list-count>8</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2016/09/"><i class=fa aria-hidden=true>2016年09月</i></a><span class=archive-list-count>6</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2016/08/"><i class=fa aria-hidden=true>2016年08月</i></a><span class=archive-list-count>7</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2016/07/"><i class=fa aria-hidden=true>2016年07月</i></a><span class=archive-list-count>1</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2016/06/"><i class=fa aria-hidden=true>2016年06月</i></a><span class=archive-list-count>4</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2016/05/"><i class=fa aria-hidden=true>2016年05月</i></a><span class=archive-list-count>1</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2016/04/"><i class=fa aria-hidden=true>2016年04月</i></a><span class=archive-list-count>2</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2016/03/"><i class=fa aria-hidden=true>2016年03月</i></a><span class=archive-list-count>1</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2016/02/"><i class=fa aria-hidden=true>2016年02月</i></a><span class=archive-list-count>3</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2015/04/"><i class=fa aria-hidden=true>2015年04月</i></a><span class=archive-list-count>1</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2014/11/"><i class=fa aria-hidden=true>2014年11月</i></a><span class=archive-list-count>3</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2014/10/"><i class=fa aria-hidden=true>2014年10月</i></a><span class=archive-list-count>6</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2014/04/"><i class=fa aria-hidden=true>2014年04月</i></a><span class=archive-list-count>5</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2014/01/"><i class=fa aria-hidden=true>2014年01月</i></a><span class=archive-list-count>2</span></li></ul></div><div class=widget><h3 class=title>Tag Cloud</h3><div class="content tag-cloud"><a href="/tags/C/" style="font-size: 17.5px;">C++</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/bat语法/" style="font-size: 10px;">bat语法</a> <a href="/tags/formatter/" style="font-size: 10px;">formatter</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/java/" style="font-size: 20px;">java</a> <a href="/tags/log4j2/" style="font-size: 10px;">log4j2</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/mybatis/" style="font-size: 10px;">mybatis</a> <a href="/tags/ngrok/" style="font-size: 10px;">ngrok</a> <a href="/tags/nodejs/" style="font-size: 12.5px;">nodejs</a> <a href="/tags/spring/" style="font-size: 10px;">spring</a> <a href="/tags/sublime-text3/" style="font-size: 10px;">sublime text3</a> <a href="/tags/前端/" style="font-size: 12.5px;">前端</a> <a href="/tags/命令/" style="font-size: 10px;">命令</a> <a href="/tags/感慨/" style="font-size: 12.5px;">感慨</a> <a href="/tags/算法/" style="font-size: 10px;">算法</a></div></div><div class=widget><h3 class=title>Friends</h3><div class="content friends-link"><a href=http://blog.csdn.net/u013132051 class=fa target=_blank>个人博客</a></div></div></aside></div></div></section><footer class=main-footer><div class=container><div class=row></div></div></footer><a id=back-to-top class=hide><i class="fa fa-chevron-up"></i></a><div class=copyright><div class=container><div class=row><div class=col-sm-12><span>Copyright &copy; 2017</span> | <span>Powered by <a href=//hexo.io class=copyright-links target=_blank rel=nofollow>张新华</a></span> | <span>Theme by <a href=//github.com/shenliyang/hexo-theme-snippet.git class=copyright-links target=_blank rel=nofollow>ZxhTom</a></span></div></div></div></div><script src=https://code.jquery.com/jquery-latest.js></script><script src=https://assets.changyan.sohu.com/upload/plugins/plugins.count.js></script><script src="/assets/highlight.pack.js?rev=@@hash"></script><script>
     hljs.initHighlightingOnLoad(); //初始化代码高亮 
  </script><script src="/js/search.js?rev=@@hash"></script><script src="/js/app.js?rev=@@hash"></script><script src="/assets/prefix.js?rev=@@hash"></script><script src="/assets/my.js?rev=@@hash"></script></body></html>
<!DOCTYPE HTML><html><head><script>
	if('' == 'true'){
		if (prompt('请输入管理员密码') !== '025025'){
            alert('密码错误！');
            location.href='https://zxhtom.oschina.io';
    	}
	}
</script><meta charset=UTF-8><meta name=viewport content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"><meta http-equiv=X-UA-Compatible content="IE=Edge,chrome=1"><meta http-equiv=Cache-Control content=no-siteapp><meta name=renderer content=webkit|ie-comp|ie-stand><meta name=apple-mobile-web-app-capable content=yes><meta name=apple-mobile-web-app-status-bar-style content=black><meta name=format-detection content="telephone=no,email=no,adress=no"><meta name=browsermode content=application><meta name=screen-orientation content=portrait><link rel=dns-prefetch href=https://zxhtom.oschina.io><meta name=description content=张新华的个人网站><meta name=robots content=all><meta name=google content=all><meta name=googlebot content=all><meta name=verify content=all><title>大话 Spring Session 共享 | 烟花散尽13141</title><link rel=alternate href=/atom.xml title=烟花散尽13141 type=application/atom+xml><link rel=icon href=/favicon.ico><link rel=stylesheet href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css?rev=9.12.0"><link rel=stylesheet href="//cdn.bootcss.com/bootstrap/3.3.4/css/bootstrap.min.css?rev=3.3.4"><link rel=stylesheet href=//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css><link rel=stylesheet href="/css/style.css?rev=@@hash"><link rel=stylesheet href="/css/mycss.css?rev=@@hash"><div class=hide><script src="https://s4.cnzz.com/z_stat.php?id=1263868967&web_id=1263868967" language=JavaScript></script></div><script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?709c2dde1f61f5e589ff3ed31ba52411";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script></head><body><header class=main-header style=background-image:url(http://7xpw2b.com1.z0.glb.clouddn.com/hexo-sinppet/img/banner2.jpg)><div class=main-header-box><a class=header-avatar href="/"><img src=/img/avatar.jpg alt=logo头像></a><div class=branding><h2>学如逆水行舟，不进则退！！！</h2></div></div></header><nav class=main-navigation><div class=container><div class=row><div class=col-sm-12><div class=navbar-header><span class="nav-toggle-button collapsed" data-toggle=collapse data-target=#main-menu id=mnav><span class=sr-only>Toggle navigation</span> <i class="fa fa-bars"></i></span></div><div class="collapse navbar-collapse" id=main-menu><ul class=menu><li role=presentation><a href="/"><i class="fa fa-fw"></i>首页</a></li><li role=presentation><a href="/about/"><i class="fa fa-fw"></i>关于我</a></li><li role=presentation><a href="/tags/"><i class="fa fa-fw"></i>标签</a></li><li role=presentation><a href="/categories/"><i class="fa fa-fw"></i>分类</a></li><li role=presentation><a href="/archives/"><i class="fa fa-fw"></i>归档</a></li><li role=presentation><a href="/schedule/"><i class="fa fa-fw"></i>日程表</a></li><li role=presentation><a href=/sitemap.xml><i class="fa fa-fw"></i>地图导航</a></li><li role=presentation><a href="/404/"><i class="fa fa-fw"></i>公益活动</a></li></ul></div></div></div></div></nav><section class=content-wrap><div class=container><div class=row><main class="col-md-8 main-content m-post"><div id=toc class=toc-article><div class=hamburger><div class=line></div><div class=line></div><div class=line></div></div><strong class=toc-title>文章目录</strong><div class=menu-inner><ol class=toc><li class="toc-item toc-level-1"><a class=toc-link href=#简介><span class=toc-number>1.</span> <span class=toc-text>简介</span></a></li><li class="toc-item toc-level-1"><a class=toc-link href=#配tomcat实现session共享><span class=toc-number>2.</span> <span class=toc-text>配tomcat实现session共享</span></a><ol class=toc-child><li class="toc-item toc-level-2"><a class=toc-link href=#资源下载><span class=toc-number>2.1.</span> <span class=toc-text>资源下载</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#配置Tomcat><span class=toc-number>2.2.</span> <span class=toc-text>配置Tomcat</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#配置nginx><span class=toc-number>2.3.</span> <span class=toc-text>配置nginx</span></a></li></ol></li><li class="toc-item toc-level-1"><a class=toc-link href=#配spring-session实现session共享><span class=toc-number>3.</span> <span class=toc-text>配spring session实现session共享</span></a><ol class=toc-child><li class="toc-item toc-level-2"><a class=toc-link href=#spring-session-配置><span class=toc-number>3.1.</span> <span class=toc-text>spring session 配置</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#spring配置文件配置><span class=toc-number>3.2.</span> <span class=toc-text>spring配置文件配置</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#问题><span class=toc-number>3.3.</span> <span class=toc-text>问题</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#解决办法><span class=toc-number>3.4.</span> <span class=toc-text>解决办法</span></a></li><li class="toc-item toc-level-2"><a class=toc-link href=#存取策略重构><span class=toc-number>3.5.</span> <span class=toc-text>存取策略重构</span></a></li></ol></li></ol></div><svg version=1.1 id=blob xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink><path id=blob-path d=M60,500H0V0h60c0,0,20,172,20,250S60,900,60,500z></path></svg></div><p id=process></p><article class=post><div class=post-head><h1 id="大话 Spring Session 共享">大话 Spring Session 共享</h1><div class=post-meta><span class="categories-meta fa-wrap"><i class="fa fa-folder-open-o"></i> <span>编程</span></span> <span class=fa-wrap><i class="fa fa-tags"></i> <span class=tags-meta>java</span></span> <span class=fa-wrap><i class="fa fa-clock-o"></i> <span class=date-meta>2017/04/01</span></span> <a href=/zxh/20170401.html#comments class=comment-count><i id=changyan_count_unit data-xid=zxh/20170401.html></i>留言, <i id=changyan_parti_unit data-xid=zxh/20170401.html></i>参与</a> <span id=busuanzi_container_page_pv>view : <span id=busuanzi_value_page_pv></span>次</span></div></div><div class="post-body post-content"><p>javaweb中我们项目稍微正规点<br><a id=more></a></p><pre><code>javaweb中我们项目稍微正规点，都会用到单点登录这个技术。实现它的方法各家有各界的看法。这几天由于公司项目需求正在研究。下面整理一下最近整理的心得。
</code></pre><h1 id=简介><a href=#简介 class=headerlink title=简介></a>简介</h1><ul><li>在分布式项目中另我们头疼的是多项目之间的数据共享(即Session共享)，经常会出现数据丢失的情况。为了解决这种Bug。前人已经把我们实现了两种解决的办法。今天我在这里一下这两种方式。侧重偏向第二种方法</li></ul><h1 id=配tomcat实现session共享><a href=#配tomcat实现session共享 class=headerlink title=配tomcat实现session共享></a>配tomcat实现session共享</h1><h2 id=资源下载><a href=#资源下载 class=headerlink title=资源下载></a>资源下载</h2><p><a href=http://download.csdn.net/detail/u013132051/9793434 target=_blank rel=noopener>点我下载</a></p><hr><h2 id=配置Tomcat><a href=#配置Tomcat class=headerlink title=配置Tomcat></a>配置Tomcat</h2><ul><li><p>下载好上面的jar包，把他放在tomcat的lib文件下。</p><p><img src="http://img.blog.csdn.net/20170325143631803?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMzEzMjA1MQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=这里写图片描述></p></li><li><p>然后修改Tomcat里的conf/context.xml文件</p></li></ul><pre><code>&lt;Valve className=&quot;com.orangefunction.tomcat.redissessions.RedisSessionHandlerValve&quot; /&gt;  
&lt;Manager className=&quot;com.orangefunction.tomcat.redissessions.RedisSessionManager&quot;  
host=&quot;192.168.1.130&quot;   
port=&quot;7006&quot;   
database=&quot;db0&quot;   
maxInactiveInterval=&quot;60&quot; /&gt;
</code></pre><ul><li>上面配置的host和port就是我们redis的host和port，所以在此之前我们需要先开启一个redis服务出来。<br><a href=http://blog.csdn.net/u013132051/article/details/53764042 target=_blank rel=noopener>点我查看如何配置redis(本文配置集群，配置单节点一样)</a><br><a href=http://blog.csdn.net/u013132051/article/details/53765344 target=_blank rel=noopener>点我查看如何配置redis和spring的整合</a><br><a href=http://blog.csdn.net/u013132051/article/details/54584180 target=_blank rel=noopener>点我查看如何配置redis中你遇到的问题汇总</a></li></ul><ul><li>database就是讲该tomcat与浏览器会话时产生的session存放在redis中的位置</li></ul><p><img src="http://img.blog.csdn.net/20170325144239743?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMzEzMjA1MQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=这里写图片描述></p><ul><li>maxInactiveInterval 就是设置缓存的过期时间。但是在实际测试中我发现这个属性并没有发生作用。(你有啥见解欢迎点评)</li></ul><font color=blue face=楷体>到这里我们的第一个Tomcat配置完成。下面就是重复上面的步骤多配制几个Tomcat</font><h2 id=配置nginx><a href=#配置nginx class=headerlink title=配置nginx></a>配置nginx</h2><ul><li>nginx功能丰富，可以作为HTTP服务器，也可以作为反向代理的服务器，邮件服务器。支持FastCGI、SSL、Virtual Host、URL Rewrite、Gzip等功能。并且支持很多第三方的模块扩展。</li><li><p>nginx的下载官网有现成的，直接下载符合自己电脑的版本傻瓜式安装就行了。(<font color=red face=楷体>安装或者解压不要出现中文</font>)</p></li><li><p>找到conf/nginx.conf文件在里面修改设置</p><ul><li>listen 802： 我们监听的端口</li><li>server_name 192.168.1.130：监听的地址</li><li>proxy_pass <a href=http://mynginxserver：根据情况跳转最后的连接 target=_blank rel=noopener>http://mynginxserver：根据情况跳转最后的连接</a></li><li>在mynginxserver配置多个Tomcat：</li></ul></li></ul><pre><code>upstream mynginxserver {
            server 192.168.1.78:8080 weight=1;
            server 192.168.1.130:8080 weight=1;
        }
</code></pre><ul><li>完成配置</li></ul><pre><code>upstream mynginxserver {
        server 192.168.1.78:8080 weight=1;
        server 192.168.1.130:8080 weight=1;
    }

    server {
        listen       802;
        server_name  192.168.1.130;

        #charset koi8-r;

        #access_log  logs/host.access.log  main;

        location / {
            proxy_pass http://mynginxserver;
        }

        #error_page  404              /404.html;

        # redirect server error pages to the static page /50x.html
        #
        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   html;
        }

        # proxy the PHP scripts to Apache listening on 127.0.0.1:80
        #
        #location ~ \.php$ {
        #    proxy_pass   http://127.0.0.1;
        #}

        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
        #
        #location ~ \.php$ {
        #    root           html;
        #    fastcgi_pass   127.0.0.1:9000;
        #    fastcgi_index  index.php;
        #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;
        #    include        fastcgi_params;
        #}

        # deny access to .htaccess files, if Apache&#39;s document root
        # concurs with nginx&#39;s one
        #
        #location ~ /\.ht {
        #    deny  all;
        #}
    }
</code></pre><ul><li>这个时候当我们两个Tomcat都在运行状态我们浏览器中输入</li></ul><pre><code>192.168.1.130:802
</code></pre><ul><li>nginx就会随机选择一个Tomcat来运行了。同时这两个Tomcat的session是共享的。就是说A Tomcat的session B 可以用。就算A 宕机了B也照样按到A的session。</li></ul><hr><h1 id=配spring-session实现session共享><a href=#配spring-session实现session共享 class=headerlink title="配spring session实现session共享"></a>配spring session实现session共享</h1><ul><li>上面的一种方式我也是在网上案列操作的。在自己的项目中并不适合。因为我的项目中配置的是redis集群(非sentinel).所以在Tomcat里面配置是不行的。<br><font color=blue face=楷体>解释：</font>第一种方式配置的redis默认是单节点的redis。也就是我们的session会产生sessionID作为redis中key存在我们配置redis节点的库上面。但是如果我们是redis集群的话，集群会将根据key值算出slot值，在根据slot值决定存取在哪一台redis服务商。也就是说在存session前我们根本不知道会存在哪一台redis上。所以这种方法不适合于redis集群。</li></ul><p>具体看看我画的思维导图吧：</p><p><img src="http://img.blog.csdn.net/20170325151422103?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMzEzMjA1MQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=这里写图片描述></p><p>第二章明显出错了，事实上并没有存储在实现约定的redis上</p><p><img src="http://img.blog.csdn.net/20170325152606702?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMzEzMjA1MQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=这里写图片描述></p><hr><h2 id=spring-session-配置><a href=#spring-session-配置 class=headerlink title="spring session 配置"></a>spring session 配置</h2><ul><li>说了这么多了，我们下面开始讲解spring中集成的session共享配置。首先如果你是maven项目那么直接引入jar</li></ul><pre><code>&lt;dependency&gt;                                                    &lt;groupId&gt;org.springframework.session&lt;/groupId&gt;
&lt;artifactId&gt;spring-session&lt;/artifactId&gt;
&lt;version&gt;1.1.1.RELEASE&lt;/version&gt;
&lt;/dependency&gt;
</code></pre><ul><li>若果你不是maven项目，那么就麻烦你自己去下载这些相关的jar包。</li></ul><pre><code>spring-data-redis.jar
redis.clients.jar
spring-session.jar
</code></pre><ul><li>同样这里你需要一下几篇文章来配置redis集群<br><a href=http://blog.csdn.net/u013132051/article/details/53764042 target=_blank rel=noopener>点我查看如何配置redis</a><br><a href=http://blog.csdn.net/u013132051/article/details/53765344 target=_blank rel=noopener>点我查看如何配置redis和spring的整合</a><br><a href=http://blog.csdn.net/u013132051/article/details/54584180 target=_blank rel=noopener>点我查看如何配置redis中你遇到的问题汇总</a></li></ul><h2 id=spring配置文件配置><a href=#spring配置文件配置 class=headerlink title=spring配置文件配置></a>spring配置文件配置</h2><ul><li><p>有了上面的准备资料后，我们可以在是spring的配置文件中配置spring session了</p></li><li><p>很简单我们需要引入spring session中的bean</p></li></ul><pre><code>&lt;bean class=&quot;org.springframework.session.data.redis.config.annotation.web.http.RedisHttpSessionConfiguration&quot;&gt;
</code></pre><ul><li>在spring的配置文件中我们只需要配置这一个bean就可以了。下面离将session共享到redis集群上只差一步了。就是在web.xml文件中配置拦截器</li></ul><pre><code>&lt;filter&gt;
    &lt;filter-name&gt;springSessionRepositoryFilter&lt;/filter-name&gt;
    &lt;filter-class&gt;org.springframework.web.filter.DelegatingFilterProxy&lt;/filter-class&gt;
&lt;/filter&gt;
&lt;filter-mapping&gt;
      &lt;filter-name&gt;springSessionRepositoryFilter&lt;/filter-name&gt;
      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;
</code></pre><ul><li>到这里配置完成了，我们可以重启我们的项目运行一下存取session的部分。然后再去redis集群找看看有没有session。在redis中默认的session的key是<code>spring:session:sessions:c0d1fadd-b04a-4244-9525-0f13ea7173bf</code>。其中后面一串id就是我们Tomcat和浏览器会话时差生的sessionid。</li></ul><p><img src="http://img.blog.csdn.net/20170325153910006?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMzEzMjA1MQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=这里写图片描述></p><h2 id=问题><a href=#问题 class=headerlink title=问题></a>问题</h2><ul><li><p>在上面我们配置spring session 已经可以实现了session共享了。但是细心的朋友可以发现。session并没有真正意义上的共享。上面我们可以看到session在redis集群中的key包含了Tomcat和浏览器的sessionid。也就是说redis上这个session只能是我的这个Tomcat在该浏览器上才可以访问到。别的Tomcat就算和同一个浏览器交互也是拿不到redis上这个session的。这种效果是你们想要的吗。答案并不是。上面实现的效果我用一幅图描述一下。<br><img src="http://img.blog.csdn.net/20170325154948709?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMzEzMjA1MQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=这里写图片描述></p></li><li><p>也就是说上面我的配置只是将Tomcat的session转移到了redis上。多服务的session仍然是各区各的。这是一个大坑。坑了好久。然后我想了另外一种办法现在可以解决这个局限性。</p></li></ul><h2 id=解决办法><a href=#解决办法 class=headerlink title=解决办法></a>解决办法</h2><ul><li>解决上面的问题。这里我提供三种思路。三种思路我都实现了一下。各有利弊。最后决定采用第三种比较靠谱。</li></ul><p>1– 重写spring session源码，重写里面讲session存储在redis那部分代码，主要就是为了将redis 中session的key写成固定值。以后我们在去session中取这个固定的key就可以实现session共享了。</p><p>2–只重写spring session中我们的session仓库中去的策略，就是在A项目登录后将产生的sessionID传递给B项目。B项目在根据这个sessionid去redis中获取。</p><font color=blue face=楷体>上面两中方法需要自定义很多类，整理了自定义的类和配置文件的配置。<a href=http://download.csdn.net/detail/u013132051/9793521 target=_blank rel=noopener>点我下载</a></font><p>3– 在向session中存值的地方，将sessionid作为value，请求头中的Host和Agent组合最为key存储在redis上。然后我们在spring session去session的方法里在根据Host和Agent组成的key去获取sessionid，然后就可以获取对应的session了。</p><h2 id=存取策略重构><a href=#存取策略重构 class=headerlink title=存取策略重构></a>存取策略重构</h2><ul><li>这里主要讲解一下第三种的实现步骤。首先我新建一个类用来读取request求情头中的host和agent拼接的key值。</li></ul><pre><code>public static Map&lt;String, Object&gt; getInfoFromUrl(HttpServletRequest request)
    {
        Map&lt;String, Object&gt; resultMap=new HashMap&lt;String, Object&gt;();
        String Agent = request.getHeader(&quot;User-Agent&quot;); 
        String Host = request.getHeader(&quot;Host&quot;); 
        resultMap.put(&quot;agent&quot;, Agent);
        resultMap.put(&quot;host&quot;, Host);
        return resultMap;
    } 

    public static String getKeyFromUrl(HttpServletRequest request)
    {
        String result=&quot;&quot;;
        Map&lt;String, Object&gt; map = getInfoFromUrl(request);
        Set&lt;String&gt; keySet = map.keySet();
        for (String key : keySet)
        {
            result+=map.get(key).toString();
        }
        return result;
    }
</code></pre><ul><li>然后在我们调用session存值的地方，也就是登录的地方。通过我们项目中的redis操作类将其存储起来。</li></ul><p><img src="http://img.blog.csdn.net/20170325162342669?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMzEzMjA1MQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=这里写图片描述></p><ul><li>然后我们修改spring session中的cookie仓库中的去request的sessionid的策略</li></ul><p><img src="http://img.blog.csdn.net/20170325162456412?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMzEzMjA1MQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=这里写图片描述></p><ul><li>最后我们在spring的配置中修改是spring session的策略为我么你的cook策略</li></ul><pre><code>&lt;bean id=&quot;redisCacheTemplate&quot; class=&quot;com.bshinfo.web.base.cache.RedisCacheTemplate&quot;/&gt;
    &lt;bean id=&quot;zxh&quot; class=&quot;com.bshinfo.web.base.cache.CookieHttpSessionStrategyTest&quot;&gt;
        &lt;property name=&quot;redisCacheTemplate&quot; ref=&quot;redisCacheTemplate&quot; /&gt;
    &lt;/bean&gt;
     &lt;bean class=&quot;org.springframework.session.data.redis.config.annotation.web.http.RedisHttpSessionConfiguration&quot;&gt; 
         &lt;property name=&quot;httpSessionStrategy&quot; ref=&quot;zxh&quot;/&gt;
         &lt;property name=&quot;maxInactiveIntervalInSeconds&quot; value=&quot;60&quot;/&gt;
     &lt;/bean&gt;
</code></pre><ul><li>最后就实现了我们的效果。效果就是A项目在X浏览器上登录后。B项目在X浏览器获取session的用户可以正常获取。否则获取失败。</li></ul></div><div class=post-footer><div>转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © <a target=_blank>烟花散尽13141</a></div><div></div></div></article><div class="article-nav prev-next-wrap clearfix"><a href=/zxh/20170410.html class="pre-post btn btn-default"><i class="fa fa-angle-left fa-fw"></i>上一篇</a> <a href=/zxh/20170322.html class="next-post btn btn-default">下一篇<i class="fa fa-angle-right fa-fw"></i></a></div><div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;"><div>坚持原创技术分享，您的支持将鼓励我继续创作！</div><button id=rewardButton disable=enable onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}"><span>赏</span></button><div id=QR style="display: none;"><div id=wechat style="display: inline-block"><a href=/img/wechatpay.jpg class="fancybox fancybox.image" rel=group><img id=wechat_qr src=/img/wechatpay.jpg alt="颜敏 WeChat Pay"></a><p>微信打赏</p></div><div id=alipay style="display: inline-block"><a href=/img/alipay.jpg class="fancybox fancybox.image" rel=group><img id=alipay_qr src=/img/alipay.jpg alt="颜敏 Alipay"></a><p>支付宝打赏</p></div></div></div><div id=comments><div id=SOHUCS sid=/zxh/20170401.html></div><script type=text/javascript> 
    (function(){ 
    var appid = 'cyti5JvoU'; 
    var conf = 'prod_a32310aad07e12c7706c8da1901ed57b'; 
    var width = window.innerWidth || document.documentElement.clientWidth; 
    if (width < 960) { 
    window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>'); } else { var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("https://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); } })(); </script></div></main><aside class="col-md-4 sidebar"><div class=widget><h3 class=title>Search</h3><div id=search-form><div id=result-mask class=hide></div><div class=search-area><input id=search-key type=search autocomplete=off placeholder=搜点什么呢?> <button type=button class=search-form-submit id=search-local>站内搜索</button></div><div id=result-wrap class=hide><div id=search-result></div></div><div class=hide><template id=search-tpl><div class=item><a href=/{path} title={title}><div class=title>{title}</div><div class=content>{content}</div></a></div></template></div></div></div><div class="widget notification"><h3 class=title>网站公告</h3><div><p><font color=red>pc、移动端目录区分设计</font></p></div></div><div class=widget><h3 class=title>Social</h3><div class="content social"><a href=//gitee.com/zxhtom rel="external nofollow" title=oschina target=_blank><i class="git fa fa-git"></i></a> <a href=mailto:870775401@qq.com rel="external nofollow" title=邮箱 target=_blank><i class="envelope-o fa fa-envelope-o"></i></a> <a href=870775401 rel="external nofollow" title=联系QQ target=_blank><i class="qq fa fa-qq"></i></a> <a href="/" rel="external nofollow" title=微博 target=_blank><i class="weibo fa fa-weibo"></i></a> <a href=376091466 rel="external nofollow" title=QQ群1 target=_blank><i class="users fa fa-users"></i></a> <a href=/atom.xml rel="external nofollow" title=RSS target=_blank><i class="feed fa fa-feed"></i></a></div></div><div class=widget><h3 class=title>Categories</h3><ul class=category-list><li class=category-list-item><a class=category-list-link href="/categories/开发工具/"><i class=fa aria-hidden=true>开发工具</i></a><span class=category-list-count>3</span></li><li class=category-list-item><a class=category-list-link href="/categories/案例/"><i class=fa aria-hidden=true>案例</i></a><span class=category-list-count>2</span></li><li class=category-list-item><a class=category-list-link href="/categories/程序人生/"><i class=fa aria-hidden=true>程序人生</i></a><span class=category-list-count>3</span></li><li class=category-list-item><a class=category-list-link href="/categories/编程/"><i class=fa aria-hidden=true>编程</i></a><span class=category-list-count>88</span></li></ul></div><div class=widget><h3 class=title>Archives</h3><ul class=archive-list><li class=archive-list-item><a class=archive-list-link href="/archives/2018/01/"><i class=fa aria-hidden=true>2018年01月</i></a><span class=archive-list-count>2</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2017/12/"><i class=fa aria-hidden=true>2017年12月</i></a><span class=archive-list-count>1</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2017/11/"><i class=fa aria-hidden=true>2017年11月</i></a><span class=archive-list-count>2</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2017/10/"><i class=fa aria-hidden=true>2017年10月</i></a><span class=archive-list-count>3</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2017/06/"><i class=fa aria-hidden=true>2017年06月</i></a><span class=archive-list-count>1</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2017/04/"><i class=fa aria-hidden=true>2017年04月</i></a><span class=archive-list-count>5</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2017/03/"><i class=fa aria-hidden=true>2017年03月</i></a><span class=archive-list-count>4</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2017/02/"><i class=fa aria-hidden=true>2017年02月</i></a><span class=archive-list-count>4</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2017/01/"><i class=fa aria-hidden=true>2017年01月</i></a><span class=archive-list-count>9</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2016/12/"><i class=fa aria-hidden=true>2016年12月</i></a><span class=archive-list-count>7</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2016/11/"><i class=fa aria-hidden=true>2016年11月</i></a><span class=archive-list-count>3</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2016/10/"><i class=fa aria-hidden=true>2016年10月</i></a><span class=archive-list-count>8</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2016/09/"><i class=fa aria-hidden=true>2016年09月</i></a><span class=archive-list-count>6</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2016/08/"><i class=fa aria-hidden=true>2016年08月</i></a><span class=archive-list-count>7</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2016/07/"><i class=fa aria-hidden=true>2016年07月</i></a><span class=archive-list-count>1</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2016/06/"><i class=fa aria-hidden=true>2016年06月</i></a><span class=archive-list-count>4</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2016/05/"><i class=fa aria-hidden=true>2016年05月</i></a><span class=archive-list-count>1</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2016/04/"><i class=fa aria-hidden=true>2016年04月</i></a><span class=archive-list-count>2</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2016/03/"><i class=fa aria-hidden=true>2016年03月</i></a><span class=archive-list-count>1</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2016/02/"><i class=fa aria-hidden=true>2016年02月</i></a><span class=archive-list-count>3</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2015/04/"><i class=fa aria-hidden=true>2015年04月</i></a><span class=archive-list-count>1</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2014/11/"><i class=fa aria-hidden=true>2014年11月</i></a><span class=archive-list-count>3</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2014/10/"><i class=fa aria-hidden=true>2014年10月</i></a><span class=archive-list-count>6</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2014/04/"><i class=fa aria-hidden=true>2014年04月</i></a><span class=archive-list-count>5</span></li><li class=archive-list-item><a class=archive-list-link href="/archives/2014/01/"><i class=fa aria-hidden=true>2014年01月</i></a><span class=archive-list-count>2</span></li></ul></div><div class=widget><h3 class=title>Tag Cloud</h3><div class="content tag-cloud"><a href="/tags/C/" style="font-size: 17.5px;">C++</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/bat语法/" style="font-size: 10px;">bat语法</a> <a href="/tags/formatter/" style="font-size: 10px;">formatter</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/java/" style="font-size: 20px;">java</a> <a href="/tags/log4j2/" style="font-size: 10px;">log4j2</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/mybatis/" style="font-size: 10px;">mybatis</a> <a href="/tags/ngrok/" style="font-size: 10px;">ngrok</a> <a href="/tags/nodejs/" style="font-size: 12.5px;">nodejs</a> <a href="/tags/spring/" style="font-size: 10px;">spring</a> <a href="/tags/sublime-text3/" style="font-size: 10px;">sublime text3</a> <a href="/tags/前端/" style="font-size: 12.5px;">前端</a> <a href="/tags/命令/" style="font-size: 10px;">命令</a> <a href="/tags/感慨/" style="font-size: 12.5px;">感慨</a> <a href="/tags/算法/" style="font-size: 10px;">算法</a></div></div><div class=widget><h3 class=title>Friends</h3><div class="content friends-link"><a href=http://blog.csdn.net/u013132051 class=fa target=_blank>个人博客</a></div></div></aside></div></div></section><footer class=main-footer><div class=container><div class=row></div></div></footer><a id=back-to-top class=hide><i class="fa fa-chevron-up"></i></a><div class=copyright><div class=container><div class=row><div class=col-sm-12><span>Copyright &copy; 2017</span> | <span>Powered by <a href=//hexo.io class=copyright-links target=_blank rel=nofollow>张新华</a></span> | <span>Theme by <a href=//github.com/shenliyang/hexo-theme-snippet.git class=copyright-links target=_blank rel=nofollow>ZxhTom</a></span></div></div></div></div><script src=https://code.jquery.com/jquery-latest.js></script><script src=https://assets.changyan.sohu.com/upload/plugins/plugins.count.js></script><script src="/assets/highlight.pack.js?rev=@@hash"></script><script>
     hljs.initHighlightingOnLoad(); //初始化代码高亮 
  </script><script src="/js/search.js?rev=@@hash"></script><script src="/js/app.js?rev=@@hash"></script><script src="/assets/prefix.js?rev=@@hash"></script><script src="/assets/my.js?rev=@@hash"></script></body></html>